@page "/crafts/detail/{id}"
@model KalaGhar.Pages.Crafts.DetailModel
@{
}

<!--================Single Product Area =================-->
<div class="product_image_area">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-12">

                @if (Model.Craft.Images.Count != 0)
                {
                <div class="product_img_slide owl-carousel">

                    @foreach (var image in Model.Craft.Images)
                    {
                        <div class="single_product_img">
                            <img src="~/Images/@image.Name" alt="@image.Name" class="img-fluid">
                        </div>
                    }                                   

                </div>
                }


            </div>
            <div class="col-lg-8">
                <div class="single_product_text text-center">
                    <h3>
                        @Model.Craft.Name 
                    </h3>
                    <p>
                        @Model.Craft.Description.

                    </p>
                    <div class="card_area">
                        <div class="product_count_area">
                            <p>Price @Model.Craft.Price</p>
                        </div>
                        <div class="product_count_area">
                            <p>Quantity @Model.Craft.Quantity</p>
                        </div>
                        <div class="add_to_cart">
                            <a asp-page-handler="AddToWishList" asp-route-id="@Model.Craft.Id" class="btn_3">add to wishlist</a>
                        </div>

                        <div>
                            @foreach (var message in Model.Craft.Messages)
                            {
                                <p>@message.Text</p>
                                <p>@message?.SenderUserId</p>
                                <p>@message.CreatedDateTime</p>

                                <section>
                                    @foreach(var reply in message.Replies)
                                    {
                                        <p>@reply.ReplyText</p>
                                        <p>@reply.CreatedDateTime</p>                                       
                                    }
                                </section>

                                <p>Add Replies</p>
                                <form method="post" asp-page-handler="ReplyMessageSubmit">
                                    <input type="hidden" name="MessageId" value="@message.Id" />
                                    <textarea name="ReplyText"></textarea>
                                    <input type="submit" value="Submit" />
                                </form>
                            }

                        </div>

                        <p>Add Question</p>

                        <form method="post" asp-page-handler="MessageSubmit">
                            <input type="hidden" name="CraftId" value="@Model.CraftId"/>
                            <textarea name="Text" ></textarea>
                            <input type="submit" value="Submit"/>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--================End Single Product Area =================-->